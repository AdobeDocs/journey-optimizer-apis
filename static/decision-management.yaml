swagger: "2.0"
info:
  description: APIs supported by the Offer Decision Service (ODS)
  version: 0.0.1
  title: ODS APIs
  contact:
    email: orion-eng@adobe.com
  x-logo:
    url: ""
host: platform.adobe.io
basePath: /data/core/ode
tags:
  - name: Service Health
    description: Platform Service Health
    externalDocs:
      description: Find out more
      url: https://wiki.corp.adobe.com/display/DMSArchitecture/Service+Health+Checks
schemes:
  - https
produces:
  - application/json
consumes:
  - application/json

paths:
  /{containerId}/decisions:
    post:
      operationId: post-decision
      tags:
        - Decisions
      summary: Request an offer decision for each specified scope and profile
      description: |
        Determine the best offer(s) for a given set of activities based on eligibility rules that match profile and context data provided. Defaults to V0.9
        | Version           | Model                                                                         | Changes                                                                                                               |
        |-------------------|-------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
        | 0.9 (default)     | https://ns.adobe.com/experience/offer-management/decision-request;version=0.9 | Initial request type                                                                                                  |
        | 1.0               | https://ns.adobe.com/experience/offer-management/decision-request;version=1.0 | Added PropositionRequests (activity placement pairs), refactored identityMap into profiles, added responseFormat field|

      consumes:
        - application/json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/decision-request;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/decision-request;version=1.0"
      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/decision-response;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/decision-response;version=1.0"

      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: header
          name: x-ode-package-commit-id
          description: __Unstable__
            Note that this header is for an Alpha feature and breaking changes may be introduced.

            The decisioning package commit ID. When a package commit ID is specified in this header,
            the decisioning process will be invoked using the runtime data frozen at the time of the
            commit's creation. When not specified, defaults to the special value "latest", which implies
            that the latest version of the decisioning package will be used for decisioning.
          required: false
          default: latest
          x-example: 100-1201232
          type: string
        - in: path
          name: containerId
          description:
            The UUID for the container that was generated by the repository. This value is
            obtained by locating the container from the (/) resource, in the repository home document.
          required: true
          type: string
        - in: body
          name: request
          description:
            The request body to get the decision. Due to limitations of OpenAPI V2, the below
            example can only show a single version (V1.0) of the request schema we support.
            See [Decisions Request V0.9](#/definitions/decision-request-v0.9) in the models section below.
          required: true
          schema:
            allOf:
              - $ref: "#/definitions/decision-request-v1.0"
      responses:
        "200":
          description:
            Success - Decision was made for a given set of activities. Due to limitations of
            OpenAPI V2, the below example can only show a single version (V1.0) of the request schema we
            support. See [Decisions Request V0.9](#/definitions/decision-request-v0.9) in the models
            section below.
          headers:
            X-Request-Id:
              description: The request ID
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            allOf:
              - $ref: "#/definitions/decision-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "406":
          description: Not acceptable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "415":
          description: Unsupported media type
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: Unprocessable Entity
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "429":
          description: Too many requests sent to profile service
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /{containerId}/modelUsage:
    post:
      operationId: post-modelUsage
      tags:
        - Model Usage
      summary: Returns information about what data is accessed by the specified scopes
      description: |
        This API returns information about what data is accessed by the specified scopes (activity/placement pairs).
        Such data can be profiles, experience events, context data or offer metadata, from sources like the unified profile access service or the request itself.
        Data can be accessed by eligibility rules, ranking functions or segment identities referenced by options/offers or activity criteria related to the specified scopes.
        The response may contain reference paths to accessed properties, schema IDs and versions as well as the sources data can from.
        All response formats will return the combined model usage across all specified scopes.
        Scopes that do not access any data may result in empty model usage data.

        When using the 0.9 and 1.0 response formats, any error will result in an error response.

        When using the 2.0 response format, some errors will instead result in a 207 (Mixed status) response status and will be listed for each affected scope.
        Unaffected scopes will be returned just like in a 200 (OK) response.

        The POST endpoint has to be used for activities that use multiple placements.

        | Version       | Model                                                                    | Changes                                                                                       |
        |---------------|--------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
        | 0.9           | https://ns.adobe.com/experience/offer-management/model-usage;version=0.9 | Initial response type                                                                         |
        | 1.0           | https://ns.adobe.com/experience/offer-management/model-usage;version=1.0 | Renamed fields, add aggregation over model source                                             |
        | 2.0 (default) | https://ns.adobe.com/experience/offer-management/model-usage;version=2.0 | Model usage also returned for each scope, lists certain errors instead of failing the request |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=1.0"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=2.0"
      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description: The UUID for the container that was generated by the repository
          required: true
          type: string
        - in: body
          name: request
          description:
            Contains a list of scopes (activity/placement pairs) for which to return model usage information.
            Activity ID and placement ID refer to the @id property of an offer activity or placement, respectively.
            We allow up to 30 scopes in one request.
          required: true
          schema:
            allOf:
              - $ref: "#/definitions/model-usage-request-v2.0"
        - in: header
          name: x-ode-package-commit-id
          description: __Unstable__
            Note that this header is for an Alpha feature and breaking changes may be introduced.

            The decisioning package commit ID. When a package commit ID is specified in this header,
            the response will be based on the runtime data frozen at the time of the
            commit's creation. When not specified, defaults to the special value "latest", which implies
            that the latest version of the decisioning package will be used for decisioning.
          required: false
          default: latest
          x-example: 100-1201232
          type: string

      responses:
        "200":
          description: Success, no issues encountered.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/model-usage-response-v2.0"
        "207":
          description: |
            Issues with at least some of the specified scopes. Only possible with the 2.0 response schema.
            For the affected scopes, the response will contain a status other than 200 and error messages,
            while the remaining scopes will contain status 200 and the usual details.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/model-usage-response-v2.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "406":
          description: Not acceptable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: The resource was unprocessable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
    get:
      operationId: get-modelUsage
      tags:
        - Model Usage
      summary: Returns information about what data is accessed by the specified activities
      description: |
        This API returns information about what data is accessed by the specified activities.
        Such data can be profiles, experience events, context data or offer metadata, from sources like the unified profile access service or the request itself.
        Data can be accessed by eligibility rules, ranking functions or segment identities referenced by options/offers or activity criteria related to the specified scopes.
        The response may contain reference paths to accessed properties, schema IDs and versions as well as the sources data can from.
        All response formats will return the combined model usage across all specified scopes.
        Scopes that do not access any data may result in empty model usage data.

        When using the 0.9 and 1.0 response formats, any error will result in an error response.

        When using the 2.0 response format, some errors will instead result in a 207 (Mixed status) response status and will be listed for each affected scope.
        Unaffected activities will be returned just like in a 200 (OK) response.

        The POST endpoint has to be used for activities that use multiple placements.

        | Version       | Model                                                                    | Changes                                                                                          |
        |---------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
        | 0.9           | https://ns.adobe.com/experience/offer-management/model-usage;version=0.9 | Initial response type                                                                            |
        | 1.0 (default) | https://ns.adobe.com/experience/offer-management/model-usage;version=1.0 | Renamed fields, add aggregation over model source                                                |
        | 2.0           | https://ns.adobe.com/experience/offer-management/model-usage;version=2.0 | Model usage also returned for each activity, lists certain errors instead of failing the request |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=1.0"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/model-usage;version=2.0"
      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description: The UUID for the container that was generated by the repository
          required: true
          type: string
        - in: query
          name: activityId
          description: >-
            The @id property of an offer activity that determines the filter applied to the offer inventory.
            This query parameter can be repeated like `activityId=<SOME_@ID>[&activityId=<SOME_@ID>&...]`.
            We allow up to 30 activity IDs in one request.
          required: true
          type: string
        - in: header
          name: x-ode-package-commit-id
          description: __Unstable__
            Note that this header is for an Alpha feature and breaking changes may be introduced.

            The decisioning package commit ID. When a package commit ID is specified in this header,
            the response will be based on the runtime data frozen at the time of the
            commit's creation. When not specified, defaults to the special value "latest", which implies
            that the latest version of the decisioning package will be used for decisioning.
          required: false
          default: latest
          x-example: 100-1201232
          type: string

      responses:
        "200":
          description: Success, no issues encountered.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/model-usage-response-v1.0"
        "207":
          description: |
            Issues with at least some of the specified activites. Only possible with the 2.0 response schema.
            For the affected activities, the response will contain a status other than 200 and error messages,
            while the remaining activities will contain status 200 and the usual details.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/model-usage-response-v2.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "406":
          description: Not acceptable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: The resource was unprocessable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /{containerId}/options:
    post:
      operationId: post-options
      tags:
        - Options/Offers
      summary: Returns options/offers and other entities that belong to the specified scopes
      description: |
        This API returns details about the activities, placements, options/offers and fallback options/offers that belong to each of the specified scopes (activity/placement combinations).

        When using the 0.9 response format, any error will result in an error response.

        When using the 2.0 response format, some errors will instead result in a 207 (Mixed status) response status and will be listed for each affected scope.
        Unaffected scopes will be returned just like in a 200 (OK) response.

        The POST endpoint has to be used for activities that use multiple placements.
        However, the 0.9 response format is still supported, allowing for a stepped migration if desired.

        | Version           | Model                                                                         | Changes                                                                                                                   |
        |-------------------|-------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|
        | 0.9               | https://ns.adobe.com/experience/offer-management/offers-response;version=0.9  | Initial response type                                                                                                     |
        | 1.0 (default)     | https://ns.adobe.com/experience/offer-management/options-response;version=1.0 | Added support for multiple scopes (activity ID / placement ID pairs), lists certain errors instead of failing the request |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/offers-response;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/options-response;version=1.0"
      parameters:
        - name: containerId
          in: path
          description: The UUID for the container that was generated by the repository
          required: true
          type: string
        - name: request
          in: body
          description:
            Contains a list of scopes (activity ID and placement ID pairs) for which to return options/offers.
            Activity ID and placement ID refer to the @id property of an offer activity or placement, respectively.
            We allow up to 30 scopes in one request.
            If the specified activity IDs or placement IDs are invalid (longer than 100 characteres or no valid URIs), the response will be a BAD REQUEST (400).
            If any of the specified scopes were not found, an error message will be returned for them, without affecting the response for scopes that exist.
          required: true
          schema:
            allOf:
              - $ref: "#/definitions/options-request-v1.0"
        - name: Authorization
          in: header
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - name: x-gw-ims-org-id
          in: header
          description: IMS organization ID
          required: true
          type: string
        - name: x-sandbox-id
          in: header
          description: The sandbox ID
          required: false
          type: string
        - name: x-sandbox-name
          in: header
          description: The sandbox name
          required: false
          type: string
        - name: X-Request-Id
          in: header
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - name: x-api-key
          in: header
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: header
          name: x-ode-package-commit-id
          description: __Unstable__
            Note that this header is for an Alpha feature and breaking changes may be introduced.

            The decisioning package commit ID. When a package commit ID is specified in this header,
            the response will be based on the runtime data frozen at the time of the
            commit's creation. When not specified, defaults to the special value "latest", which implies
            that the latest version of the decisioning package will be used for decisioning.
          required: false
          default: latest
          x-example: 100-1201232
          type: string
      responses:
        "200":
          description: Success - Return a list of scopes with included option IDs and a fallback option ID, and details for all referenced activities, placements, options and fallback options.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/options-response-v1.0"
        "207":
          description: |
            Issues with at least some of the specified scopes. Only possible with the 2.0 response schema.
            For the affected scopes, the response will contain a status other than 200 and error messages,
            while the remaining scopes will contain status 200 and the usual details.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/options-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "406":
          description: Not acceptable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: The resource was unprocessable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /{containerId}/offers:
    get:
      operationId: get-offers
      tags:
        - Options/Offers
      summary: Returns options/offers and other entities that belong to the specified activities
      description: |
        This API returns details about the activities, placements, options/offers and fallback options/offers that belong to each of the specified activities.

        When using the 0.9 response format, any error will result in an error response.

        When using the 2.0 response format, some errors will instead result in a 207 (Mixed status) response status and will be listed for each affected activity.
        Unaffected scopes will be returned just like in a 200 (OK) response.

        The POST endpoint has to be used for activities that use multiple placements.
        However, the 0.9 response format is still supported, allowing for a stepped migration if desired.

        | Version           | Model                                                                         | Changes                                                                                                           |
        |-------------------|-------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
        | 0.9 (default)     | https://ns.adobe.com/experience/offer-management/offers-response;version=0.9  | Initial response type                                                                                             |
        | 1.0               | https://ns.adobe.com/experience/offer-management/options-response;version=1.0 | Added support for multiple scopes (activity/placement pairs), lists certain errors instead of failing the request |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/offers-response;version=0.9"
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/options-response;version=1.9"
      parameters:
        - name: containerId
          in: path
          description: The UUID for the container that was generated by the repository
          required: true
          type: string
        - name: activityId
          in: query
          description: The @id property of an offer activity that determines the filter applied to the offer inventory
          required: true
          type: string
        - name: Authorization
          in: header
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - name: x-gw-ims-org-id
          in: header
          description: IMS organization ID
          required: true
          type: string
        - name: x-sandbox-id
          in: header
          description: The sandbox ID
          required: false
          type: string
        - name: x-sandbox-name
          in: header
          description: The sandbox name
          required: false
          type: string
        - name: X-Request-Id
          in: header
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - name: x-api-key
          in: header
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: header
          name: x-ode-package-commit-id
          description: __Unstable__
            Note that this header is for an Alpha feature and breaking changes may be introduced.

            The decisioning package commit ID. When a package commit ID is specified in this header,
            the response will be based on the runtime data frozen at the time of the
            commit's creation. When not specified, defaults to the special value "latest", which implies
            that the latest version of the decisioning package will be used for decisioning.
          required: false
          default: latest
          x-example: 100-1201232
          type: string

      responses:
        "200":
          description: Success - Return a list of offer objects and a single fallback offer object for a requested activity.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/activity-offers"
        "207":
          description: |
            Issues with the specified activity. Only possible with the 1.0 response schema.
            For the affected activity, the response will contain a status other than 200 and error messages.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/options-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "406":
          description: Not acceptable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: The resource was unprocessable
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /{containerId}/workloads/decisions:
    post:
      operationId: post-workloads-decisions
      tags:
        - Workload Decisions
      summary: Request to establish a new decisioning workload
      description: |
        Allocates the resources needed for a new decisioning workload. ODE returns a HTTP 200 response with the workloadId and then allocates resources asynchronously. The client may execute GET request using the workloadId to check the status of resource allocations.

        | Version           | Model                                                                                  | Changes             |
        |-------------------|----------------------------------------------------------------------------------------|---------------------|
        | 1.0 (default)     | https://ns.adobe.com/experience/offer-management/workload-decision-request;version=1.0 | Initial request type|

      consumes:
        - application/json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-request;version=1.0"
      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-response;version=1.0"

      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description:
            The UUID for the container that was generated by the repository. This value is
            obtained by locating the container from the (/) resource, in the repository home document.
          required: true
          type: string
        - in: body
          name: request
          description:
            The request body to create a decisioning workload
          required: true
          schema:
            allOf:
              - $ref: "#/definitions/workload-decision-request-v1.0"
      responses:
        "200":
          description:
            Success - workload decision request was submitted. This response contains a workload id that the client can execute a GET with to check the status of the resource allocation
          headers:
            X-Request-Id:
              description: The request ID
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            allOf:
              - $ref: "#/definitions/workload-decision-post-response-v1.0"

        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
    get:
      operationId: list-workloads-decisions
      tags:
        - Workload Decisions
      summary: Returns list of decisioning workloads for given containerId
      description: |
        The client invokes list API to get the details of decisioning workloads.

      produces:
        - application/json
      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description: The UUID for the container that was generated by the repository
          required: true
          type: string
        - name: limit
          in: query
          description: The number of workloads to be returned in list API response.
          required: false
          type: integer
        - name: status
          in: query
          description: The workload status that determines the filter applied to workload inventory. This query parameter supports filter by multiple status, i.e. status=QUEUED&status=PROCESSING
          required: false
          type: string
        - name: segmentId
          in: query
          description: The segmentId that determins the filter applied to workload inventory, i.e. segmentId=segmentId1
          required: false
          type: string
        - name: placementId
          in: query
          description: The placementId that determines the filter applied to workload inventory, i.e. placementId=placementId1
          required: false
          type: string
        - name: activityId
          in: query
          description: The activityId that determines the filter applied to workload inventory, i.e. activityId=activityId1
          required: false
          type: string
        - name: search
          in: query
          description:
            The search keyword that applied to workload id / workload name.
            Note it's full match for workload id but partial match for workload name. i.e. search=workloadId or search=partOfWorkloadName.
            Search by workload name is case insensitive.
          required: false
          type: string

      responses:
        "200":
          description: Success - workload list is returned based on query parameters. This includes the case when empty list is returned.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/workload-decision-list-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /{containerId}/workloads/decisions/{workloadId}:
    get:
      operationId: get-workloads-decisions
      tags:
        - Workload Decisions
      summary: Returns the status of the provided decisioning workload
      description: |
        The client invokes GET to check the status of the provided decisioning workload. When workload is complete, the status check should return a HTTP 200 response. Otherwise a HTTP 202 response is returned.

        | Version       | Model                                                                                     | Changes              |
        |---------------|-------------------------------------------------------------------------------------------|----------------------|
        | 1.0 (default) | https://ns.adobe.com/experience/offer-management/workload-decision-id-request;version=1.0 | Initial request type |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-id-response;version=1.0"
      parameters:
        - in: path
          name: workloadId
          type: string
          required: true
          description: The UUID generated by ODE that identifies a single workload.
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description: The UUID for the container that was generated by the repository
          required: true
          type: string

      responses:
        "200":
          description: Success - no issues encountered and workload is complete.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/workload-decision-response-v1.0"
        "202":
          description: Accepted - no issues encountered and request is still in progress. The "ode:status" in this response can either be "QUEUED", "PROCESSING", "INGESTING" or "ERROR"
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/workload-decision-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
    delete:
      operationId: delete-workload
      tags:
        - Workload Decisions
      summary: deletes the workload in queued/completed/error state
      description: |
        The client invokes DELETE to delete the workload in queued/completed/error state. When workload is in those states, the workload gets deleted and returns a HTTP 200 response. Otherwise a HTTP 422 response is returned.
      parameters:
        - in: path
          name: workloadId
          type: string
          required: true
          description: The UUID generated by ODE that identifies a single workload.
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: false
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: false
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: path
          name: containerId
          description: The UUID for the container that was generated by the repository
          required: true
          type: string

      responses:
        "200":
          description: Success - no issues encountered and workload is deleted.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: Workload is not in queued state
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /batchDecisions:
    post:
      operationId: post-ud-workloads-decisions
      tags:
        - Batch APIs for Unified Decision
      summary: Request to establish a new unified decisioning workload
      description: |
        Allocates the resources needed for a new unified decision workload. Note that unified decision workload is managed separately with decision workload. ODE returns a HTTP 200 response with the workloadId and then allocates resources asynchronously. The client may execute GET request using the workloadId to check the status of resource allocations.

        | Version           | Model                                                                                  | Changes             |
        |-------------------|----------------------------------------------------------------------------------------|---------------------|
        | 1.0 (default)     | https://ns.adobe.com/experience/offer-management/workload-decision-request;version=1.0 | Initial request type|

      consumes:
        - application/json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-request;version=1.0"
      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-response;version=1.0"

      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: true
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: true
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - in: body
          name: request
          description:
            The request body to create a decisioning workload
          required: true
          schema:
            allOf:
              - $ref: "#/definitions/ud-workload-decision-request-v1.0"
      responses:
        "200":
          description:
            Success - workload decision request was submitted. This response contains a workload id that the client can execute a GET with to check the status of the resource allocation
          headers:
            X-Request-Id:
              description: The request ID
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            allOf:
              - $ref: "#/definitions/workload-decision-post-response-v1.0"

        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
    get:
      operationId: list-ud-workloads-decisions
      tags:
        - Batch APIs for Unified Decision
      summary: Returns list of unified decision workloads for given sandbox id
      description: |
        The client invokes list API to get the details of workloads for unified decisioning. Note that unified decision workload is managed separately with workloads for offer decision. This list API wouldn't return any workload for offer decision.

      produces:
        - application/json
      parameters:
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: true
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: true
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string
        - name: limit
          in: query
          description: The number of workloads to be returned in list API response.
          required: false
          type: integer
        - name: status
          in: query
          description: The workload status that determines the filter applied to workload inventory. This query parameter supports filter by multiple status, i.e. status=QUEUED&status=PROCESSING
          required: false
          type: string
        - name: segmentId
          in: query
          description: The segmentId that determins the filter applied to workload inventory, i.e. segmentId=segmentId1
          required: false
          type: string
        - name: selectionStrategyId
          in: query
          description: The selectionStrategyId that determines the filter applied to workload inventory, i.e. selectionStrategyId=selectionStrategyId1
          required: false
          type: string
        - name: search
          in: query
          description:
            The search keyword that applied to workload id / workload name.
            Note it's full match for workload id but partial match for workload name. i.e. search=workloadId or search=partOfWorkloadName.
            Search by workload name is case insensitive.
          required: false
          type: string

      responses:
        "200":
          description: Success - unified decision workload list is returned based on query parameters. This includes the case when empty list is returned.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/ud-workload-decision-list-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

  /batchDecisions/{workloadId}:
    get:
      operationId: get-ud-workloads-decisions
      tags:
        - Batch APIs for Unified Decision
      summary: Returns the status of the provided unified decisioning workload
      description: |
        The client invokes GET to check the status of the workload for unified decisioning. Note that unified decision workload is managed separately with workloads for offer decision. This API wouldn't return any workload for offer decision. When workload is complete, the status check should return a HTTP 200 response. Otherwise a HTTP 202 response is returned.

        | Version       | Model                                                                                     | Changes              |
        |---------------|-------------------------------------------------------------------------------------------|----------------------|
        | 1.0 (default) | https://ns.adobe.com/experience/offer-management/workload-decision-id-request;version=1.0 | Initial request type |

      produces:
        - application/json
        - application/problem+json
        - application/vnd.adobe.xdm+json; schema="https://ns.adobe.com/experience/offer-management/workload-decision-id-response;version=1.0"
      parameters:
        - in: path
          name: workloadId
          type: string
          required: true
          description: The UUID generated by ODE that identifies a single workload.
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: true
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: true
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string

      responses:
        "200":
          description: Success - no issues encountered and workload is complete.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/ud-workload-decision-response-v1.0"
        "202":
          description: Accepted - no issues encountered and request is still in progress. The "ode:status" in this response can either be "QUEUED", "PROCESSING", "INGESTING" or "ERROR"
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/json
              type: string
          schema:
            $ref: "#/definitions/ud-workload-decision-response-v1.0"
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
    delete:
      operationId: delete-ud-workload
      tags:
        - Batch APIs for Unified Decision
      summary: deletes the unified decision workload in queued/completed/error state
      description: |
        The client invokes DELETE to delete the workload for unified decision in queued/completed/error state. When workload is in those states, the workload gets deleted and returns a HTTP 200 response. Otherwise a HTTP 422 response is returned.
      parameters:
        - in: path
          name: workloadId
          type: string
          required: true
          description: The UUID generated by ODE that identifies a single workload.
        - in: header
          name: Authorization
          description: IMS user access token, IMS service token with the required scope acp.foundation
          required: true
          type: string
          x-example: Bearer <token>
        - in: header
          name: x-gw-ims-org-id
          description: IMS organization ID
          required: true
          type: string
        - in: header
          name: x-sandbox-id
          description: The sandbox ID
          required: true
          type: string
        - in: header
          name: x-sandbox-name
          description: The sandbox name
          required: true
          type: string
        - in: header
          name: X-Request-Id
          description: A unique string to identify the request, MUST be unique for each request
          required: true
          type: string
        - in: header
          name: x-api-key
          description: The API key belonging to the calling client
          required: true
          type: string

      responses:
        "200":
          description: Success - no issues encountered and workload is deleted.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
        "400":
          description: Bad request
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "401":
          description: Unauthorized, invalid authentication credentials.
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "403":
          description: Forbidden, insufficient permissions
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "404":
          description: Resource not found
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "422":
          description: Workload is not in queued state
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "500":
          description: Internal server error
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"
        "503":
          description: Service unavailable due to server overload
          headers:
            X-Request-Id:
              description: The request ID for the custom X-Request-Id header value
              type: string
            Content-Type:
              description: application/problem+json
              type: string
          schema:
            $ref: "#/definitions/error-detail"

definitions:
  activity-reference:
    type: object
    required:
      - xdm:offerActivity
    properties:
      xdm:offerActivity:
        type: string
        format: uri

  activity-offer-proposition:
    type: object
    required:
      - xdm:offerActivity
    properties:
      xdm:offerActivity:
        type: string
        format: uri
      xdm:scope:
        type: string
        description: Base64 encoded String
      xdm:offers:
        description: Offer details for the best match based on eligibility rules.
        type: array
        items:
          type: string
          format: uri
      xdm:fallbackOffer:
        description:
          Fallback offer details only if no matching offers are found. This is required if
          no matching offers are found.
        type: string
        format: uri

  context-data:
    type: object
    additionalProperties: true
    properties:
      "@type":
        type: string
        format: uri
      xdm:data:
        type: object

  decision-request-v0.9:
    type: object
    example:
      xdm:offerActivities:
        - xdm:offerActivity: xcore:offer-activity:ffed0123
        - xdm:offerActivity: xcore:offer-activity:fffc0456
      xdm:identityMap:
        SWCUSTID:
          - xdm:id: SW123-34221
      xdm:dryRun: true
      xdm:validateContextData: true
      xdm:mergePolicy:
        xdm:id: d2b3c073-920a-4579-bb9e-886ce3596650
      xdm:contextData:
        - "@type": https://ns.adobe.com/xdm/context/placecontext
          xdm:data:
            xdm:localTime: 2001-07-04T12:08:56+01:00
            xdm:geo:
              "@id": https://data.adobe.io/entities/geo/austin
              xdm:countryCode: USA
              xdm:stateProvince: USA-13
              xdm:city: Austin
              xdm:postalCode: 141-0032
              schema:latitude: 35.6185
              schema:longitude: 139.73237
        - "@type": https://ns.adobe.com/xdm/context/device
          xdm:data:
            xdm:typeID: TypeIdentifier-111
            xdm:typeIDService: https://ns.adobe.com/xdm/external/deviceatlas
            xdm:type: mobile
            xdm:manufacturer: Apple
            xdm:model: iPhone 6
            xdm:modelNumber: A1586
            xdm:screenHeight: 667
            xdm:screenWidth: 375
            xdm:colorDepth: 16777216

    required:
      - xdm:offerActivities
      - xdm:identityMap
    properties:
      xdm:offerActivities:
        type: array
        items:
          $ref: "#/definitions/activity-reference"
        minItems: 1
        maxItems: 30
      xdm:identityMap:
        $ref: "#/definitions/xdm-identity-map"
      xdm:allowDuplicatePropositions:
        $ref: "#/definitions/allow-duplicate-propositions"
      xdm:dryRun:
        type: boolean
        default: false
      xdm:mergePolicy:
        $ref: "#/definitions/merge-policy"
      xdm:validateContextData:
        type: boolean
        default: false
      xdm:contextData:
        type: array
        items:
          $ref: "#/definitions/context-data"

  decision-request-v1.0:
    type: object
    description: This is the schema for request body of decisions API
    required:
      - xdm:propositionRequests
      - xdm:profiles
    example:
      xdm:propositionRequests:
        - xdm:placementId: xcore:offer-placement:ffed0456
          xdm:activityId: xcore:offer-activity:ffed0123
          xdm:itemCount: 2
        - xdm:placementId: xcore:offer-placement:ffed0012
          xdm:activityId: xcore:offer-activity:fffc0789
      xdm:profiles:
        - xdm:identityMap:
            SWCUSTID:
              - xdm:id: 123@abc.com
          xdm:decisionRequestId: 0AA00002-0000-1337-c0de-c0fefec0fefe
      xdm:allowDuplicatePropositions:
        xdm:acrossActivities: true
        xdm:acrossPlacements: true
        xdm:acrossSelectionStrategies: true
      xdm:mergePolicy:
        xdm:id: 5f3ed32f-eaf1-456c-b0f0-7b338c4cb18a
      xdm:responseFormat:
        xdm:includeContent: true
        xdm:includeMetadata:
          xdm:activity:
            - name
          xdm:option:
            - name
          xdm:placement:
            - name

    properties:
      xdm:propositionRequests:
        type: array
        description: Proposition Requests
        items:
          $ref: "#/definitions/proposition-request"
        minItems: 1
        maxItems: 30
      xdm:profiles:
        type: array
        description:
          Profile with the identityMap and context data for each of the profiles.
          For an API request this will contain one profile
        items:
          $ref: "#/definitions/profile-reference"
        maxItems: 1
        minItems: 1
      xdm:allowDuplicatePropositions:
        type: object
        $ref: "#/definitions/allow-duplication-propositions"
        description:
          A set of flags that controls if the same proposition can be returned
          across the specified range. If no values are specified the default behaviors
          (rules) apply.
      xdm:responseFormat:
        type: object
        $ref: "#/definitions/response-format"
        description: A set of flags that formats the response content.
      xdm:dryRun:
        type: boolean
        title: Dry Run
        default: false
        description:
          Dry run indicates to the decision engine whether the call being
          made is a trial run or not. If it is a dry run, the decision engine doesn't
          affect the caps related to the option, and does not emit a decision event to
          user's data lake.
      xdm:mergePolicy:
        type: object
        title: Merge Policy
        $ref: "#/definitions/merge-policy"
        description:
          Identifies the merge policy by which to govern the data returned
          by profile access service. If one is not specified in the request, ODE won't
          pass along anything to the profile access service, else it would pass the id
          provided by the caller.
      xdm:validateContextData:
        type: boolean
        title: Validate Context Data
        default: false
        description:
          The validate context data flag allows the validation of the Context
          Data to be toggled on or off. If it's toggled on, for each provided context
          data, the schema (based on the @type field) will be fetched from the XDM
          registry, and the context data object will be validated against it.

  response-format:
    type: object
    description:
      This is the schema for the rules on formatting the response content
      information for propositions.
    additionalProperties: false
    properties:
      xdm:includeContent:
        type: boolean
        description:
          If set to true the response will include content eg. text, html
          block, image link
        default: false
      xdm:includeMetadata:
        type: object
        description:
          Used to specify what metadata is returned. If this is missing
          then xdm:id and repo:etag are returned by default
        $ref: "#/definitions/include-metadata"

  include-metadata:
    type: object
    description:
      This is the schema for any additional metadata to be returned for
      the chosen decisioning entities. The 'id' and '_repo.etag' properties of the
      entities will always be returned. The value of each entity type is an array
      of the entity element paths in XED notation, limited to a subset of the available
      fields per entity type.
    additionalProperties: false
    properties:
      xdm:activity:
        type: array
        items:
          type: string
          enum:
            - name
      xdm:placement:
        type: array
        items:
          type: string
          enum:
            - name
            - channel
            - componentType
      xdm:scope:
        type: string
      xdm:option:
        type: array
        items:
          type: string
          enum:
            - name
            - characteristics
            - priority

  allow-duplication-propositions:
    type: object
    description:
      This is the schema for the control structure of the De-duplication
      rules. It consists of a series of flags that indicate if the same option can
      be proposed across a certain dimension. A flag that is set to true means duplicates
      are allowed, even desired and should not be removed across the category indicated
      by the flag. A flag set to false means that the decision engine should not make
      the same proposition across the dimension and instead pick the next best option
      for one of the sub-decisions.
    additionalProperties: false
    properties:
      xdm:acrossActivities:
        type: boolean
        description:
          If set to true multiple activities may get assigned the same
          option
        default: false
      xdm:acrossPlacements:
        type: boolean
        description:
          If set to true multiple placements may get assigned the same
          option
        default: false
      xdm:acrossSelectionStrategies:
        type: boolean
        description:
          If set to true multiple selection strategies may get
          assigned the same option
        default: false

  profile-reference:
    type: object
    additionalProperties: false
    properties:
      xdm:identityMap:
        type: object
        title: Identity Map
        $ref: "#/definitions/xdm-identity-map"
        description:
          Defines a map containing a set of end user identities, keyed
          on the namespace integration code of the identity. The values of the map
          are an array, meaning that more than one identity of each namespace may
          be carried.
      xdm:contextData:
        type: array
        title: Context Data
        items:
          type: object
          properties:
            "@type":
              type: string
              format: uri
            xdm:data:
              type: object
          required:
            - "@type"
            - xdm:data
          additionalProperties: true
      xdm:decisionRequestId:
        type: string
        title: Decision Request ID
        description:
          The ID generated by the client that can be used to uniquely identify
          a profile decision request. This ID will simply be echoed back in the response,
          it does not influence the outcomes of the decision.
      xdm:attributes:
        type: object
        title: Profile Attributes
        description: __Not Publicly Documented__
          The profile record attributes to use for this decision. When this field is set,
          the data passed in here will be used in the decisioning process as the profile record,
          and no look ups of any kind will be made to the Unified Profile service. There is also
          no validation done currently on the adequacy of the provided data, and the client should
          derive the necessary attributes to pass in from the Model Usage API. The ability to
          pass in experience events is currently not yet supported.
    required:
      - xdm:identityMap

  proposition-request:
    type: object
    description: This is the schema for a proposition request
    additionalProperties: false
    properties:
      xdm:activityId:
        type: string
        format: uri-reference
        title: The activity identifier
        description:
          The unique identifier of the activity. This is the value of the
          @id property of the Activity.
      xdm:placementId:
        type: string
        format: uri-reference
        title: The placement identifier
        description:
          The unique identifier of the placement. This is the value of
          the @id property of the placement.
      xdm:itemCount:
        type: integer
        minimum: 1
        maximum: 30
        title: The number of items requested for the decisioning scope
        description:
          The number of offers requested for the decisioning scope. By default, the API returns
          1 offer per scope, but the caller can explicitly ask for more offers by specifying this field.
          A minimum of 1 and a maximum of 30 offers can be requested per scope.
    required:
      - xdm:activityId
      - xdm:placementId

  selection-strategy:
    type: object
    description: This is the schema for a selection strategy
    additionalProperties: false
    properties:
      selectionStrategyId:
        type: string
        format: uri-reference
        title: The selection strategy identifier
        description:
          The unique identifier of the selection strategy. This is the value of the
          @id property of the Selection Strategy.
      itemCount:
        type: integer
        minimum: 1
        maximum: 30
        title: The number of items requested for the decisioning scope
        description:
          The number of offers requested for the decisioning scope. By default, the API returns
          1 offer per scope, but the caller can explicitly ask for more offers by specifying this field.
          A minimum of 1 and a maximum of 30 offers can be requested per scope.
    required:
      - selectionStrategyId

  decision-response-v1.0:
    type: object
    example:
      xdm:propositionId: 5d0ffb5e-dfc6-4280-99b6-0bf3131cb8b8
      xdm:propositions:
        - xdm:activity:
            xdm:id: xcore:activity:ffed0123
            repo:etag: 4
          xdm:placement:
            xdm:id: xcore:placement:ffed0456
            repo:etag: 1
          xdm:scope: eyJ4ZG06YWN0aXZpdHlJZCI6Inhjb3JlOmFjdGl2aXR5OmZmZWQwMTIzIiwieGRtOnBsYWNlbWVudElkIjoieGNvcmU6cGxhY2VtZW50OmZmZWQwNDU2In0=
          xdm:options:
            - xdm:id: xcore:personalized-option:ccc0111
              repo:etag: 3
              "@type": https://ns.adobe.com/experience/decisioning/content-component-html-template
              xdm:content: "<html>some html</html>"
            - xdm:id: xcore:personalized-option:ccc0222
              repo:etag: 5
              "@type": https://ns.adobe.com/experience/decisioning/content-component-html-template
              xdm:content: "<html>hello, world</html>"
              xdm:score: 45.65
        - xdm:activity:
            xdm:id: xcore:activity:ffed0123
            repo:etag: 4
          xdm:placement:
            xdm:id: xcore:placement:ffed0789
            repo:etag: 2
          xdm:scope: eyJ4ZG06YWN0aXZpdHlJZCI6Inhjb3JlOmFjdGl2aXR5OmZmZWQwMTIzIiwieGRtOnBsYWNlbWVudElkIjoieGNvcmU6cGxhY2VtZW50OmZmZWQwNDU2In0=
          xdm:fallback:
            xdm:id: xcore:fallback:ccc0222
            repo:etag: 5
            "@type": https://ns.adobe.com/experience/decisioning/content-component-imagelink
            dc:format: image/png
            xdm:deliveryURL: https://cdn.adobe.com/content/1445323-1134331.png
            xdm:content: https://www.adobe.com/index2.html
      ode:createDate: 1566497582038

    additionalProperties: false
    description: This is the schema for response body of decisions V1.0 API
    properties:
      xdm:propositionId:
        type: string
        format: uri-reference
        description:
          The identity for the proposition entity associated with an XDM
          DecisionEvent
      xdm:propositions:
        type: array
        items:
          $ref: "#/definitions/proposition"
      xdm:factors:
        type: object
        additionalProperties:
          type: string
        description:
          Defines a map containing different factors that affected the
          propositions made, e.g. responses from the profile service
      ode:createDate:
        type: number
        description:
          The time when DecisionResponse message was created. This is represented
          as epoch time
    required:
      - xdm:propositionId
      - xdm:propositions

  proposition:
    type: object
    additionalProperties: false
    description:
      This is the schema for a single decision activity proposition. Multiple
      options could be returned for the activity. If no options can be found the activity's
      fallback option is returned in the property named so. There will always be
      either an 'options' property or a 'fallback' property present. The 'options',
      when present, is never empty.
    properties:
      xdm:activity:
        $ref: "#/definitions/activity-detail"
      xdm:placement:
        $ref: "#/definitions/placement-detail"
      xdm:scope:
        type: string
        description: This is a base 64 encoded string called 'encoded decision scope'
      xdm:options:
        type: array
        items:
          $ref: "#/definitions/option-detail"
        minItems: 1
      xdm:fallback:
        $ref: "#/definitions/option-detail"

  activity-detail:
    type: object
    additionalProperties: true
    description: This is the schema for an activity detail.
    properties:
      xdm:id:
        type: string
        format: uri-reference
      repo:etag:
        type: string
      xdm:name:
        type: string
        description: The name of the activity.
    required:
      - xdm:id
      - repo:etag

  placement-detail:
    type: object
    additionalProperties: false
    description: This is the schema for a placement detail.
    properties:
      xdm:id:
        type: string
        format: uri-reference
      repo:etag:
        type: string
      xdm:name:
        type: string
        description: The name of the placement.
      xdm:channel:
        type: string
        format: uri-reference
        description: The channel in which the proposition was made.
          The value is a valid Channel URI. See 'https://ns.adobe.com/xdm/channels/channel'
      xdm:componentType:
        type: string
        format: uri-reference
        description:
          A URI where each value maps to a type given to the content component.
          This refers to the XDM schema
          https://ns.adobe.com/experience/offer-management/content-component-type
    required:
      - xdm:id
      - repo:etag

  option-detail:
    type: object
    additionalProperties: false
    description: This is the schema for a single option.
    properties:
      xdm:id:
        type: string
        format: uri-reference
      repo:etag:
        type: string
      "@type":
        type: string
        format: uri-reference
        description:
          Type of the component. Acts as processing contract for the client.
          When the experience is assembled the composer will look for the component(s)
          that have a specific type. Refers to the XDM schema
          https://ns.adobe.com/experience/decisioning/content-component-type;version=1.0
      dc:format:
        type: string
        title: Format
        description:
          The physical or digital manifestation of the resource. Typically,
          Format should include the media-type of the resource. Format may be used
          to determine the software, hardware or other equipment needed to display
          or operate the resource. Recommended best practice is to select a value
          from a controlled vocabulary (for example, the list of
          [Internet Media Types](http://www.iana.org/assignments/media-types/) defining
          computer media formats).
      dc:language:
        type: array
        title: Language
        items:
          type: string
        description: |-
          The language or languages of the resource.
          Languages are specified in language code as defined in
          [IETF RFC 3066](https://www.ietf.org/rfc/rfc3066.txt), which is part of BCP 47,
          which is used elsewhere in XDM.
      xdm:content:
        type: string
        description: The offer contents. Present for certain content component types.
      xdm:deliveryURL:
        type: string
        format: uri-reference
        description:
          An optional unique resource locator to read the asset from a content delivery network or service
          endpoint. This URL is used to access the asset publicly from a user agent. Present for certain
          content component types.
      xdm:name:
        type: string
        description: The name of the offer.
      xdm:score:
        type: number
        description:
          This is the score for an option that is computed as a result of a ranking function associated with the option or the activity.
          It could also be the score that is returned from the ranking service. Everytime there is some computation involved, this
          field will be returned by the API.
      xdm:priority:
        type: number
        description:
          This is the priority associated with the option. If explicitly requested by the caller in the xdm:includeMetadata field
          of the request, this field will be populated and returned in the response.
      xdm:characteristics:
        type: object
        additionalProperties:
          type: string
        description:
          Additional properties or attributed belonging to this particular option. Different instances
          can have different characteristics. When every instance has a certain attribute or property it
          should be modeled as an extension to the schema that derives from option Detail. The
          characteristics are name value pairs used to distinguish an option from others. Characteristics
          are used as features to analyze and optimize the performance of an option.
    required:
      - xdm:id
      - repo:etag

  decision-response-v0.9:
    type: object
    example:
      xdm:propositionID: aep:xds:c5e91ba5-2381-46d2-8e9b-7aa22b816189
      xdm:propositions:
        - xdm:offerActivity: xcore:offer-activity:ffed0123
          xdm:scope: eyJ4ZG06YWN0aXZpdHlJZCI6Inhjb3JlOm9mZmVyLWFjdGl2aXR5OmZmZWQwMTIzIn0=
          xdm:offers:
            - xcore:personalized-offer:ccc0111
        - xdm:offerActivity: xcore:offer-activity:fffc0456
          xdm:fallbackOffer: xcore:fallback-offer:eef0021
    required:
      - xdm:propositionID
      - xdm:propositions
    properties:
      xdm:propositionID:
        type: string
      xdm:propositions:
        type: array
        items:
          $ref: "#/definitions/activity-offer-proposition"
      xdm:factors:
        type: object
        properties:
          xdm:profileResponse:
            type: string
          xdm:experienceEventsResponse:
            type: string
        additionalProperties:
          type: string
        example:
          xdm:profileResponse: HTTP 404
          xdm:experienceEventsResponse: HTTP 429

  allow-duplicate-propositions:
    type: object
    properties:
      xdm:acrossActivities:
        type: boolean
        default: false

  merge-policy:
    type: object
    properties:
      xdm:id:
        type: string
        description:
          Identifies the merge policy by which to govern the data returned
          by profile access service. If one is not specified in the request, ODE won't
          pass along anything profile access service, else it would pass the id provided
          by the caller.

  xdm-identity-map:
    type: object
    description:
      Defines a map containing a set of end user identities, keyed on the namespace
      integration code of the identity. The values of the map are an array, meaning that
      more than one identity of each namespace may be carried. This is supposed to refer
      to the schema, https://ns.adobe.com/xdm/context/identityMap

  error-detail:
    type: object
    properties:
      detail:
        type: string
      status:
        type: integer
        description: The HTTP status code generated by the server for this occurrence of the problem.
      title:
        type: string
        description: A short, human-readable summary of the problem type.
      type:
        type: string
        description: A URI reference (RFC3986) that identifies the problem type.
    description: |-
      An error object containing a problem detail, as defined by
      <a href="https://tools.ietf.org/html/rfc7807">RFC 7807 Problem Details for HTTP APIs</a>.
      The returned content-type is the <i>application/problem+json</i> media type.
      When present, this response contains machine-readable details pertaining to
      the error. Problem details include a <i>type</i>, which is a URI.

  options-request-v1.0:
    type: object
    required:
      - xdm:scopeRequests
    properties:
      xdm:scopeRequests:
        type: array
        items:
          $ref: "#/definitions/scope-request"

  options-response-v1.0:
    type: object
    required:
      - xdm:scopes
    properties:
      xdm:scopes:
        type: array
        items:
          $ref: "#/definitions/options-response-scope"
      xdm:activities:
        type: array
        items:
          $ref: "#/definitions/options-response-entity"
      xdm:placements:
        type: array
        items:
          $ref: "#/definitions/options-response-entity"
      xdm:options:
        type: array
        items:
          $ref: "#/definitions/options-response-entity"
      xdm:fallbackOptions:
        type: array
        items:
          $ref: "#/definitions/options-response-entity"
    example:
      xdm:scopes:
        - xdm:activityId: xcore:offer-activity:000000000000001
          xdm:placementId: xcore:offer-placement:000000000000001
          xdm:optionIds:
            - xcore:personalized-offer:000000000000001
            - xcore:personalized-offer:000000000000002
          xdm:fallbackOptionId: xcore:fallback-offer:000000000000001
          status: 200
        - xdm:activityId: xcore:offer-activity:000000000000002
          xdm:placementId: xcore:offer-placement:000000000000001
          xdm:optionIds:
            - xcore:personalized-offer:000000000000002
            - xcore:personalized-offer:000000000000003
          xdm:fallbackOptionId: xcore:fallback-offer:000000000000001
          status: 200
        - xdm:activityId: xcore:offer-activity:000000000000002
          xdm:placementId: xcore:offer-placement:000000000000002
          errors:
            - "The following scope was not found: xcore:offer-activity:000000000000002/xcore:offer-placement:000000000000002"
          status: 404
      xdm:activities:
        - xdm:id: xcore:offer-activity:000000000000001
          repo:etag: 42
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/870fb4d8-0ba6-42f5-bfa6-e23987af3224
        - xdm:id: xcore:offer-activity:000000000000002
          repo:etag: 23
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/27ed7fb2-a3b0-4e61-9f57-b67120a1166b
      xdm:placements:
        - xdm:id: xcore:offer-placement:000000000000001
          repo:etag: 73
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/011157d4-9141-4ba2-9673-2c296a1edc9c
      xdm:options:
        - xdm:id: xcore:personalized-offer:000000000000001
          repo:etag: 12
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/2eb40003-c79f-4070-964e-e0b872592d2d
        - xdm:id: xcore:personalized-offer:000000000000002
          repo:etag: 82
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/237ac7cf-2349-47af-a073-df3d698578e5
        - xdm:id: xcore:personalized-offer:000000000000003
          repo:etag: 10
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/78c95f72-993e-4495-8c65-f50cf016c1cf
      xdm:fallback-options:
        - xdm:id: xcore:fallback-offer:000000000000001
          repo:etag: 92
          _links:
            self:
              href: https://platform-int.adobe.io/data/core/xcore/ad1b4801-af0e-4243-811d-ee3b8b9560d7/instances/34d26a2a-9e53-48c4-b88d-2e2031ec917a

  options-response-scope:
    type: object
    required:
      - status
      - xdm:activityId
    properties:
      xdm:activityId:
        type: string
        format: uri
      xdm:placementId:
        type: string
        format: uri
        description: Always present when provided in the request, present when uniquely identified by activity ID otherwise
      xdm:optionIds:
        type: array
        items:
          type: string
          format: uri
        description: Present unless the errors field is present. May be empty.
      xdm:fallbackOptionId:
        type: string
        format: uri
        description: Present unless errors is present.
      errors:
        type: array
        items:
          type: string
        description: Present unless xdm:optionIds and xdm:fallbackOptionId are present. When present, not empty.
      status:
        type: integer
        description: HTTP status for this scope. Typically, 200 (OK), 400 (Bad Request) or 404 (Not Found), but others are possible.

  options-response-entity:
    type: object
    required:
      - xdm:id
      - repo:etag
      - _links
    properties:
      xdm:id:
        type: string
        format: uri
      repo:etag:
        type: string
      _links:
        type: object
        required:
          - self
        properties:
          self:
            $ref: "#/definitions/halLink"

  activity-offers:
    type: object
    required:
      - xdm:offers
    properties:
      xdm:offers:
        type: array
        items:
          $ref: "#/definitions/offers-model"
    description: This is the schema for the response body of the offers API.
    example:
      xdm:activityOffers:
        - xdm:offerActivity:
            "@id": xcore:offer-activity:ffc0123
            _links:
              self:
                href: https://platform-int.adobe.io/data/core/xcore/2d732063-04c5-476e-8c5e-e4ca4a261412/instances/5ef43e70-68fa-11e8-8f6a-c7af261f1478
            repo:etag: 3
          xdm:offers:
            - "@id": xcore:personalized-offer:ddf01003
              _links:
                self:
                  href: https://platform-int.adobe.io/data/core/xcore/2d732063-04c5-476e-8c5e-e4ca4a261412/instances/43753e70-68fa-11e8-8f6a-c7af261f1478
              repo:etag: 1
            - "@id": xcore:personalized-offer:eef01043
              _links:
                self:
                  href: https://platform-int.adobe.io/data/core/xcore/2d732063-04c5-476e-8c5e-e4ca4a261412/instances/43753e70-68fa-11e8-8f6a-c7af261f1399
              repo:etag: 2
            - "@id": xcore:personalized-offer:eec01026
              _links:
                self:
                  href: https://platform-int.adobe.io/data/core/xcore/2d732063-04c5-476e-8c5e-e4ca4a261412/instances/43753e70-68fa-11e8-8f6a-c7af261f1410
              repo:etag: 1
          xdm:fallbackOffer:
            "@id": xcore:fallback-offer:eef0150
            _links:
              self:
                href: https://platform-int.adobe.io/data/core/xcore/2d732063-04c5-476e-8c5e-e4ca4a261412/instances/43753e70-68fa-11e8-8f6a-c7af261f1322
            repo:etag: 1

  offers-model:
    type: object
    required:
      - xdm:offerActivity
      - xdm:fallbackOffer
    properties:
      xdm:offerActivity:
        $ref: "#/definitions/instance-detail"
      xdm:offers:
        type: array
        items:
          $ref: "#/definitions/instance-detail"
        minItems: 0
      xdm:fallbackOffer:
        $ref: "#/definitions/instance-detail"
    description:
      This is the schema for a list of offers that belong to a requested activity.
      Multiple offers could be returned for the activity. Each activity should have a single fallback
      offer even if no other matching offers are found.

  instance-detail:
    type: object
    required:
      - id
      - _links
      - repo:etag
    properties:
      id:
        type: string
        format: uri
      _links:
        type: object
        properties:
          self:
            $ref: "#/definitions/halLink"
      repo:etag:
        type: string

  halLink:
    type: object
    properties:
      href:
        type: string

  model-usage-request-v2.0:
    type: object
    required:
      - xdm:scopeRequests
    properties:
      xdm:scopeRequests:
        type: array
        items:
          $ref: "#/definitions/scope-request"

  scope-request:
    type: object
    required:
      - xdm:activityId
      - xdm:placementId
    properties:
      xdm:activityId:
        type: string
        format: uri
      xdm:placementId:
        type: string
        format: uri

  model-usage-response-v2.0:
    type: object
    description:
      Note that the examples use the unicode emoji in "$ref" due to `$ref` being a
      special keyword that resolves the reference in OpenAPI 3, which some parsers already
      support. This works around that issue, and the API really returns a `$ref` property.
    required:
      - xdm:scopes
      - xdm:aggregatedProjections
    properties:
      xdm:scopes:
        type: array
        items:
          $ref: "#/definitions/model-usage-response-scope"
      xdm:aggregatedProjections:
        type: array
        items:
          $ref: "#/definitions/source-aggregated-projections"
    example:
      xdm:scopes:
        - xdm:activityId: xcore:offer-activity:000000000000001
          xdm:placementId: xcore:offer-placement:000000000000001
          xdm:sources:
            - xdm:source: ups
              xdm:projections:
                - xdm:schema:
                    "ref": https://ns.adobe.com/xdm/context/profile__union
                    meta:altId: _xdm.context.profile__union
                    version: 1
                  xdm:referencePaths:
                    - person.name.givenName
                    - person.birthMonth
          status: 200
        - xdm:activityId: xcore:offer-activity:000000000000002
          xdm:placementId: xcore:offer-placement:000000000000001
          xdm:sources:
            - xdm:source: ups
              xdm:projections:
                - xdm:schema:
                    "ref": https://ns.adobe.com/xdm/context/profile__union
                    meta:altId: _xdm.context.profile__union
                    version: 1
                  xdm:referencePaths:
                    - workAddress.street1
                    - workAddress.city
                    - workAddress.stateProvince
                - xdm:schema:
                    "ref": https://ns.adobe.com/xdm/context/experienceevent__union
                    meta:altId: _xdm.context.experienceevent__union
                    version: 1
                  xdm:referencePaths:
                    - commerce.order.priceTotal
            - xdm:source: parameters
              xdm:projections:
                - xdm:schema:
                    "ref": https://ns.adobe.com/xdm/context/flightDetails
                    meta:altId: _xdm.context.flightDetails
                    version: 1.3
                  xdm:referencePaths:
                    - flightDetails.flightNumber
          status: 200
        - xdm:activityId: xcore:offer-activity:000000000000002
          xdm:placementId: xcore:offer-placement:000000000000002
          errors:
            - "The following scope was not found: xcore:offer-activity:000000000000002/xcore:offer-placement:000000000000002"
          status: 404
      xdm:aggregatedProjections:
        - xdm:source: ups
          xdm:projections:
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/profile__union
                meta:altId: _xdm.context.profile__union
                version: 1
              xdm:referencePaths:
                - person.name.givenName
                - person.birthMonth
                - workAddress.street1
                - workAddress.city
                - workAddress.stateProvince
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/experienceevent__union
                meta:altId: _xdm.context.experienceevent__union
                version: 1
              xdm:referencePaths:
                - commerce.order.priceTotal
        - xdm:source: parameters
          xdm:projections:
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/flightDetails
                meta:altId: _xdm.context.flightDetails
                version: 1.3
              xdm:referencePaths:
                - flightDetails.flightNumber

  model-usage-response-scope:
    type: object
    required:
      - xdm:activityId
      - status
    properties:
      xdm:activityId:
        type: string
      xdm:placementId:
        type: string
        description: Always present when provided in the request, present when uniquely identified by activity ID otherwise
      xdm:sources:
        type: array
        items:
          $ref: "#/definitions/source-aggregated-projections"
        description: Present unless the errors field is present. May be empty.
      errors:
        type: array
        items:
          type: string
        description: Present unless xdm:sources is present. When present, not empty.
      status:
        type: integer
        description: HTTP status for this scope. Typically, 200 (OK), 400 (Bad Request) or 404 (Not Found), but others are possible.

  model-usage-response-v1.0:
    type: object
    description:
      Note that the examples use the unicode emoji in "$ref" due to `$ref` being a
      special keyword that resolves the reference in OpenAPI 3, which some parsers already
      support. This works around that issue, and the API really returns a `$ref` property.
    properties:
      xdm:aggregatedProjections:
        type: array
        items:
          $ref: "#/definitions/source-aggregated-projections"
    example:
      xdm:aggregatedProjections:
        - xdm:source: ups
          xdm:projections:
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/profile__union
                meta:altId: _xdm.context.profile__union
                version: 1
              xdm:referencePaths:
                - person.name.givenName
                - person.birthMonth
                - workAddress.street1
                - workAddress.city
                - workAddress.stateProvince
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/experienceevent__union
                meta:altId: _xdm.context.experienceevent__union
                version: 1
              xdm:referencePaths:
                - commerce.order.priceTotal
        - xdm:source: parameters
          xdm:projections:
            - xdm:schema:
                "ref": https://ns.adobe.com/xdm/context/flightDetails
                meta:altId: _xdm.context.flightDetails
                version: 1.3
              xdm:referencePaths:
                - flightDetails.flightNumber

  source-aggregated-projections:
    type: object
    properties:
      xdm:source:
        type: string
        enum: ["ups", "parameters", "ode"]
      xdm:projections:
        type: array
        items:
          $ref: "#/definitions/model-projections"

  model-projections:
    type: object
    properties:
      xdm:schema:
        $ref: "#/definitions/projection-schema"
      xdm:referencePaths:
        type: array
        items:
          type: string
        minItems: 0
        description:
          An array of strings where each string represents a fully qualified path to an XDM
          field (in the XED/compatibility format) with `.` used as the path delimiter.

  # This is really a subset of https://ns.adobe.com/xdm/meta
  projection-schema:
    type: object
    properties:
      $ref:
        type: string
        format: uri
        description: The XDM schema ID
      meta:altId:
        type: string
        description: The XED (XDM compatibility format) representation of the schema
      version:
        type: string
        description: The schema version

  model-usage-response-v0.9:
    type: object
    properties:
      xdm:activityModels:
        type: array
        items:
          $ref: "#/definitions/model-usage"
    description: This is the schema for the response body of the model usage API.
    example:
      xdm:activityModels:
        - xdm:modelReference: https://ns.adobe.com/xdm/context/profile
          xdm:modelPropertyPaths:
            - xdm:person.xdm:name.xdm:givenName
            - xdm:person.xdm:birthMonth
            - xdm:workAddress.xdm:street1
            - xdm:workAddress.xdm:city
            - xdm:workAddress.xdm:stateProvince
        - xdm:modelReference: https://ns.adobe.com/xdm/context/experienceEvent
          xdm:modelPropertyPaths:
            - xdm:commerce.xdm:order.xdm:purchaseOrderNumber
            - xdm:commerce.xdm:order.xdm:priceTotal
            - xdm:commerce.xdm:order.xdm:currencyCode
        - xdm:modelReference: https://ns.example1.com/xdm/context/flightDetails
          xdm:modelPropertyPaths:
            - ex1:flightDetails.ex1:seatsAvailable
            - ex1:flightDetails.ex1:flightNumber
            - ex1:flightDetails.ex1:flightDelay

  model-usage:
    type: object
    properties:
      xdm:modelReference:
        type: string
        format: uri
      xdm:modelPropertyPaths:
        type: array
        items:
          type: string
          format: uri
        minItems: 0
    description:
      A key-value pair whose key is a reference to the model, i.e. its $id property.
      The value is an array of strings, each string representing a fully qualified path to an XDM
      field with dots used as the path delimiter.

  workload-decision-request-v1.0:
    example:
      name: workloadName1
      xdm:segmentIds:
        - segmentId1
      xdm:propositionRequests:
        - xdm:placementId: xcore:offer-placement:ffed0456
          xdm:activityId: xcore:offer-activity:ffed0123
        - xdm:placementId: xcore:offer-placement:ffed0012
          xdm:activityId: xcore:offer-activity:fffc0789
      xdm:dataSetId: dataSetId1
      xdm:includeContent: true
    type: object
    required:
      - xdm:segmentIds
      - xdm:propositionRequests
      - xdm:dataSetId
    properties:
      name:
        type: string
        description: Option field, describes workload job name
      xdm:segmentIds:
        description: The unique identifier of the segment.
        type: array
        items:
          type: string
        minItems: 1
        maxItems: 1
      xdm:propositionRequests:
        type: array
        description: Proposition Requests
        items:
          $ref: "#/definitions/proposition-request"
        minItems: 1
        maxItems: 30
      xdm:dataSetId:
        type: string
        description: The output dataSet that decision events can be written into.
      xdm:includeContent:
        type: boolean
        description: Optional field, false by default. If true the offer content is included in the decison events of dataSet.

  workload-decision-post-response-v1.0:
    example:
      "@id": f23ec456-0d3b-49c9-a6cf-d09d663ed3df
      "name": workloadName1
      ode:createDate: 1652830022685
      xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
      xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
      ode:status: QUEUED
    type: object
    required:
      - "@id"
    properties:
      "@id":
        description: The UUID generated by ODE that identifies a single workload.
        type: string
      name:
        description: The workload job name if provided in POST API request. Otherwise this field is not included in response.
        type: string
      xdm:imsOrg:
        description: The IMS Organization ID from customer, e.g., Kohl's.
        type: string
      xdm:containerId:
        description: The Container ID from customer.
        type: string
      ode:createDate:
        description: The time when Decision Workload request was created. This is represented as epoch time
        type: number
      ode:status:
        description: The status of workload, possible values (QUEUED, PROCESSING, INGESTING, COMPLETED, ERROR).
        type: string

  workload-decision-response-v1.0:
    example:
      "@id": f23ec456-0d3b-49c9-a6cf-d09d663ed3df
      "name": workloadName1
      ode:createDate: 1652830022685
      ode:endDate: 1652832022325
      ode:status: COMPLETED
      segmentSize: 9
      xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
      xdm:dataSetId: 6164bdbe1f46a318a4942034
      xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
      xdm:includeContent: false
      ode:succeededProfileCount: 5
      xdm:propositionRequests:
        - xdm:activityId: xcore:offer-activity:14245532a5ee3985
          xdm:placementId: xcore:offer-placement:13afd1102ad760aa
          xdm:itemCount: 1
      xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
    type: object
    required:
      - "@id"
    properties:
      "@id":
        description: The UUID generated by ODE that identifies a single workload.
        type: string
      name:
        description: The workload job name if provided in POST API request. Otherwise this field is not included in response.
        type: string
      xdm:imsOrg:
        description: The IMS Organization ID from customer, e.g., Kohl's.
        type: string
      xdm:containerId:
        description: The Container ID from customer.
        type: string
      ode:createDate:
        description: The time when Decision Workload request was created. This is represented as epoch time
        type: number
      ode:endDate:
        description: The time when dataset ingestion of decision result is completed. If status is not COMPLETED then this field is not included in response.
        type: number
      ode:status:
        description: The status of workload, possible values (QUEUED, PROCESSING, INGESTING, COMPLETED, ERROR).
        type: string
      ode:statusDetail:
        description: This shows more details such as sparkJobId and batchID if the status is PROCESSING or INGESTING. It shows the error details if the status is ERROR. This field is not included in response for other status.
        type: string
      xdm:segmentId:
        description: The segment id from workload POST request.
        type: string
      segmentSize:
        description: The number of profiles in the segment id from workload POST request.
        type: number
      ode:succeededProfileCount:
        description: The number of successful decision-event records ingested in the batch of dataset.
        type: number
      xdm:propositionRequests:
        type: array
        description: Proposition Requests which contains decision scopes from workload POST request.
        items:
          $ref: "#/definitions/proposition-request"
        minItems: 1
        maxItems: 30
      xdm:dataSetId:
        description: The output dataSetId to store decision result.
        type: string
      xdm:includeContent:
        description: The flag to indicate whether to include offer content in decision result.
        type: boolean

  workload-decision-list-response-v1.0:
    example:
      - "@id": f23ec456-0d3b-49c9-a6cf-d09d663ed3df
        ode:createDate: 1652830022685
        ode:endDate: 1652832022325
        ode:status: COMPLETED
        segmentSize: 9
        xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
        xdm:dataSetId: 6164bdbe1f46a318a4942034
        xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
        xdm:includeContent: false
        ode:succeededProfileCount: 5
        xdm:propositionRequests:
          - xdm:activityId: xcore:offer-activity:14245532a5ee3985
            xdm:placementId: xcore:offer-placement:13afd1102ad760aa
            xdm:itemCount: 1
        xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
      - "@id": a0c110ed-8af9-4764-8bf5-8eeb019af5b7
        name: 'Test workload name'
        ode:createDate: 1652830008321
        ode:status: ERROR
        ode:statusDetail: 'Spark job failed with status: TASK_FAILED'
        segmentSize: 9
        xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
        xdm:dataSetId: 6164bdbe1f46a318a4942034
        xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
        xdm:includeContent: false
        xdm:propositionRequests:
          - xdm:activityId: xcore:offer-activity:14245532a5ee3985
            xdm:placementId: xcore:offer-placement:13afd1102ad760aa
            xdm:itemCount: 1
        xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
    type: array
    items:
      $ref: "#/definitions/workload-decision-response-v1.0"

  ud-workload-decision-request-v1.0:
    example:
      name: workloadName1
      xdm:segmentIds:
        - segmentId1
      xdm:selectionStrategies:
        - selectionStrategyId: xcore:selection-strategy:15f4ef81ee8f9882
          itemCount: 2
      xdm:dataSetId: dataSetId1
      xdm:includeContent: true
    type: object
    required:
      - xdm:segmentIds
      - xdm:selectionStrategies
      - xdm:dataSetId
    properties:
      name:
        type: string
        description: Option field, describes workload job name
      xdm:segmentIds:
        description: The unique identifier of the segment.
        type: array
        items:
          type: string
        minItems: 1
        maxItems: 1
      xdm:selectionStrategies:
        type: array
        description: Selection Strategies
        items:
          $ref: "#/definitions/selection-strategy"
        minItems: 1
        maxItems: 30
      xdm:dataSetId:
        type: string
        description: The output dataSet that decision events can be written into.
      xdm:includeContent:
        type: boolean
        description: Optional field, false by default. If true the offer content is included in the decison events of dataSet.

  ud-workload-decision-response-v1.0:
    example:
      "@id": f23ec456-0d3b-49c9-a6cf-d09d663ed3df
      "name": workloadName1
      ode:createDate: 1652830022685
      ode:endDate: 1652832022325
      ode:status: COMPLETED
      segmentSize: 9
      xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
      xdm:dataSetId: 6164bdbe1f46a318a4942034
      xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
      xdm:includeContent: false
      ode:succeededProfileCount: 5
      xdm:selectionStrategies:
        - selectionStrategyId: xcore:selection-strategy:15f4ef81ee8f9882
          itemCount: 2
      xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
    type: object
    required:
      - "@id"
    properties:
      "@id":
        description: The UUID generated by ODE that identifies a single workload.
        type: string
      name:
        description: The workload job name if provided in POST API request. Otherwise this field is not included in response.
        type: string
      xdm:imsOrg:
        description: The IMS Organization ID from customer, e.g., Kohl's.
        type: string
      xdm:containerId:
        description: The Container ID from customer.
        type: string
      ode:createDate:
        description: The time when Decision Workload request was created. This is represented as epoch time
        type: number
      ode:endDate:
        description: The time when dataset ingestion of decision result is completed. If status is not COMPLETED then this field is not included in response.
        type: number
      ode:status:
        description: The status of workload, possible values (QUEUED, PROCESSING, INGESTING, COMPLETED, ERROR).
        type: string
      ode:statusDetail:
        description: This shows more details such as sparkJobId and batchID if the status is PROCESSING or INGESTING. It shows the error details if the status is ERROR. This field is not included in response for other status.
        type: string
      xdm:segmentId:
        description: The segment id from workload POST request.
        type: string
      segmentSize:
        description: The number of profiles in the segment id from workload POST request.
        type: number
      ode:succeededProfileCount:
        description: The number of successful decision-event records ingested in the batch of dataset.
        type: number
      xdm:selectionStrategies:
        type: array
        description: Selection Strategies from workload POST request.
        items:
          $ref: "#/definitions/selection-strategy"
        minItems: 1
        maxItems: 30
      xdm:dataSetId:
        description: The output dataSetId to store decision result.
        type: string
      xdm:includeContent:
        description: The flag to indicate whether to include offer content in decision result.
        type: boolean

  ud-workload-decision-list-response-v1.0:
    example:
      - "@id": f23ec456-0d3b-49c9-a6cf-d09d663ed3df
        ode:createDate: 1652830022685
        ode:endDate: 1652832022325
        ode:status: COMPLETED
        segmentSize: 9
        xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
        xdm:dataSetId: 6164bdbe1f46a318a4942034
        xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
        xdm:includeContent: false
        ode:succeededProfileCount: 5
        xdm:selectionStrategies:
          - selectionStrategyId: xcore:selection-strategy:15f4ef81ee8f9882
            itemCount: 2
        xdm:propositionRequests:
          - xdm:activityId: xcore:offer-activity:14245532a5ee3985
            xdm:placementId: xcore:offer-placement:13afd1102ad760aa
            xdm:itemCount: 1
        xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
      - "@id": a0c110ed-8af9-4764-8bf5-8eeb019af5b7
        name: 'Test workload name'
        ode:createDate: 1652830008321
        ode:status: ERROR
        ode:statusDetail: 'Spark job failed with status: TASK_FAILED'
        segmentSize: 9
        xdm:containerId: 5113b4ca-beea-3af4-86e4-18123246ca55
        xdm:dataSetId: 6164bdbe1f46a318a4942034
        xdm:imsOrgId: B0733161606A9F760A49411E@AdobeOrg
        xdm:includeContent: false
        xdm:selectionStrategies:
          - selectionStrategyId: xcore:selection-strategy:15f4ef81ee8f6666
            itemCount: 2
        xdm:segmentId: 473354a3-e348-4c60-ae0c-e07451c82bf1
    type: array
    items:
      $ref: "#/definitions/ud-workload-decision-response-v1.0"
